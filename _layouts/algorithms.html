<!-- 
Copyright Fernando Pelliccioni 2019

Distributed under the Boost Software License, Version 1.0. (See accompanying
file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt) 
-->

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Algorithms</title>
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:300&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="{{ site.url }}/assets/css/algorithms/style.css">
  <link rel="stylesheet" href="{{ site.url }}/assets/css/algorithms/styles/monokai-sublime.css">
  <script src="{{ site.url }}/assets/js/algorithms/highlight.pack.js"></script>
  <script src="{{ site.url }}/assets/js/algorithms/two.min.js"></script>
  <script src="{{ site.url }}/assets/js/algorithms/test.js"></script>
  <script src="{{ site.url }}/assets/js/algorithms/main.js"></script>
  <script src="{{ site.url }}/assets/js/algorithms/acorn.js"></script>
  <script src="{{ site.url }}/assets/js/algorithms/interpreter.js"></script>
</head>

<body>
    <div class="main-container">
        <div class="header-container">
            <header>
            <h1 class="title-global">
                <!-- <a href="/algorithms">Algorithms &#120572;</a>-->
                <a href="http://componentsprogramming.com/algorithms">al-Khw&#257;rizm&#299; (&#120572;)</a>
            </h1>
            <nav>
                <ul>
                    <li><a href="http://componentsprogramming.com/algorithms-about/">[About]</a></li>
                    <li><a href="http://componentsprogramming.com/algorithms-support/">[Support]</a></li>
                    <li><a href="http://componentsprogramming.com/">[Components Programming]</a></li>
                    <!-- <li><a href="http://componentsprogramming.com/algorithms-help/">[Help]</a></li> -->
                </ul>
            </nav>
            </header>
        </div>
        <div class="hijo-grande">
            <div class="hijo-grande-left">
                <div class="hijo-grande-left-b">
                    <pre id="codeHighlightPre"><code id="codeHighlight" class="javascript"></code></pre>

<!-- <textarea id="codeArea">
function min_element(f, l, r) {
    if (equal(f, l)) return l;

    var m = copy_it(f, 'm');
    f = successor(f);

    while ( ! equal(f, l)) {
        if (r(source(f), source(m))) {
            m = assign_it(m, f);
        }
        f = successor(f);
    }
    remove_it(m);
    return m;
}

var rel = relation(function(x, y) { return x &lt; y; });
var data = add_sequence([3, 2, 7, 3, 2, 1, 5, 7], "data");

var f = begin(data, "f");
var l = end(data, "l");

f = assign_it(f, min_element(f, l, rel));
if ( ! equal(f, l)) {
    print("The min element is: " + source(f));
}
</textarea> -->

<!-- <textarea id="codeArea">

function find_if(f, l, p) {
    while ( ! equal(f, l) && ! call_predicate(p, source(f))) {
        f = successor(f)
    }
    return f;
}
        
function pred(x) { 
    return x % 2 == 0; 
}

var data = add_sequence([1, 2, 3, 4, 5, 6], "data");
var data2 = add_sequence([1, 1, 3, 2, 2, 6], "data2");

var f = begin(data, "f");
var l = end(data, "l");

var it = find_if(f, l, pred);
if ( ! equal(it, l)) {
    print(source(it));
}


var f2 = begin(data2, "f2");
var l2 = end(data2, "l2");

it = find_if(f2, l2, pred);
if ( ! equal(it, l2)) {
    print(source(it));
}
</textarea>                 -->

<!-- <textarea id="codeArea">
function find_backward_if(f, l, p) {
    while ( ! equal(l, f) && ! p(source(predecessor(l, false)))) {
        l = predecessor(l);
    }
    return l;
}
        
var even = predicate(function(x) {return x % 2 == 0;});
var data = add_sequence([1, 2, 3, 4, 5, 6, 3, 1, 7], "data");
var f = begin(data, "f");
var l = end(data, "l");

var it = find_backward_if(f, l, even);
if ( ! equal(it, f)) {
    print(source(predecessor(it, false)));
}
</textarea> -->

<textarea id="codeArea">
function iota(f, l, start, step) {
    if ( ! start) start = 0;
    if ( ! step) step = 1;

    while ( ! equal(f, l)) {
        sink(f, start);
        start += step;
        f = successor(f);
    }
    return start;
}

var data1 = add_sequence(new Array(8), "data1");
var data2 = add_sequence(new Array(5), "data2");

var f = successor(begin(data1, "f"));
var l = predecessor(end(data1, "l"));

var r = iota(f, l);
print(r);

f = begin(data2, "f");
l = end(data2, "l");
r = iota(f, l, r);
print(r);
</textarea>
    
</div>
                <div class="hijo-grande-left-c">
                    <div id="Buttons">
                        <button id="startButton" onclick="startButton()">Start (Ctrl-F9)</button>
                        <button id="stepButton" onclick="stepButton()" disabled="disabled">Step (Ctrl-F10)</button>
                        <button id="restartButton" onclick="restartButton()">Restart</button>
                        <button id="editButton" onclick="editButton()">Edit</button>
                    </div>​
                </div>

                <div class="hijo-grande-left-d">
                <!-- <div id="CopyrightDiv"> -->
                    <p id="CopyrightP">
                    <a id="Copyright" href="http://componentsprogramming.com/about-me/">Copyright &copy; Fernando Pelliccioni 2019.</a>
                    </p>
                <!-- </div>​ -->
                </div>
    
            </div>
            <div class="hijo-grande-right">
                <div class="hijo-grande-right-a">
                    <div id="sequence"></div>
                </div>
                <div class="hijo-grande-right-b">
                    <div id="MEW"></div>​
                    <div id="MEE"></div>​
                </div>
                <div class="hijo-grande-right-c">
                    <pre id="outputPre"><code id="output" class="javascript"></code></pre>                    
                </div>
            </div>
        </div>
    </div>
          
    <script>
            var lines = [];
            var prevLine = "";
            var myInterpreter;

            var iterators_colors = ['#99ff99', '#d80500', '#afafff', '#ffaff7', '#fdffaf'
                                  , '#affffb', '#ffe2af', '#d0afff', '#e1ffaf', '#ffafb9'];

            var iterators_int = {};
            var iterators_gui = {};
            // var data = [];
            // var pred;

            var predicates = [];
            var sequences = {};

            var stats_it_moves = 0;
            var stats_it_cmps = 0;
            var stats_pred_appls = 0;
            var stats_swaps = 0;
            var stats_assigments = 0;
    
            // var two = new Two({
            //         fullscreen: false,
            //         autostart: true
            // });
    
            var two = new Two({
                    fullscreen: false,
                    width: document.getElementById('sequence').offsetWidth,
                    height: 600,
                    autostart: true
            }).appendTo(sequence);
    
            // document.onkeypress = function (e) {
            //     e = e || window.event;
            //     console.log(e.keyCode)
            //     // // console.log(document.getElementById('stepButton').disabled);
            //     // if (e.keyCode == 13) {
            //     //     if (document.getElementById('stepButton').disabled) {
            //     //         startButton()
            //     //     }
            //     //     if ( ! document.getElementById('stepButton').disabled) {
            //     //         stepButton();
            //     //     }
            //     // }
            // }



            document.onkeydown = function (e) {
                e = e || window.event;
                    // console.log(e)
                // console.log(e.keyCode)

                if (e.ctrlKey && e.keyCode == 120) {
                    if (document.getElementById('stepButton').disabled) {
                        startButton()
                    }
                }

                if (e.ctrlKey && e.keyCode == 121) {
                    // if (document.getElementById('stepButton').disabled) {
                    //     startButton()
                    // }
                    if ( ! document.getElementById('stepButton').disabled) {
                        stepButton();
                    }
                }

            };        



            // var url_string = "http://www.example.com/t.html?a=1&b=3&c=m2-m3-m4-m5"; //window.location.href
            var url_string = window.location.href;
            var url = new URL(url_string);
            var c = url.searchParams.get("code");
            // console.log(c);

            if (c) {
                document.getElementById('codeArea').value = c;
            }

            editButton();
            
        </script>      
    


</body>
</html>



<!-- 
function partition_semistable(f, l, p) {
    while (true) {
        if (equal(f, l)) return f;
        if (p(source(f))) break;
        f = successor(f);
    }

    //var j = f; 
    var j = copy_it(f, 'j', '#9000d8');
    j = successor(j)

    while ( ! equal(j, l)) {
        if ( ! p(source(j))) {
            iter_swap(f, j);
            f = successor(f);
        }
        j = successor(j);
    }

    remove_it(j);   //GUI stuff

    return f;
}

// var it = partition_semistable(f, l, function(x) {return x % 2 == 0;});

// var it = find_if(f, l, function(x) {return x % 2 == 0;});
//if ( ! equal(it, l)) {
//    print(source(it));
//}

function find_backward_if(f, l, p) {
    while ( ! equal(l, f) && ! p(source(predecessor(l, false)))) {
        l = predecessor(l);
    }
    return l;
}

//var it = find_backward_if(f, l, function(x) {return x % 2 == 0;});
//if ( ! equal(it, l)) {
//    print(source(predecessor(it, false)));
//}


function find(f, l, x) {
    while ( ! equal(f, l)) {
        if (source(f) == x) {
            return f;
        }
        f = successor(f)
    }
    return f;
} -->


        <!-- <p><textarea id="dataCodeArea">
data = [1, 3, 5, 2, 4, 8, 7, 2, 1, 3, 5, 2, 7, 8, 4];
pred = function(x) {return x % 2 == 0;};
        </textarea></p> -->

    <!-- <textarea id="code">
function find_if(f, l, p) {
    while ( ! equal(f, l) && ! p(source(f))) {
        f = successor(f)
    }
    return f;
}

function find_backward_if_not(f, l, p) {
    while ( ! equal(l, f) && p(source(predecessor(l, false)))) {
        l = predecessor(l);
    }
    return l;
}

function partition_bidirectional_unguarded(f, l, p) {
    while(true) {
        while ( ! p(source(f))) {
            f = successor(f)
        }

        l = predecessor(l);
        while (p(source(l))) {
            l = predecessor(l);
        }

        l = successor(l);
        if ( equal(l, f)) return f;

        l = predecessor(l);
        iter_swap(f, l);
        f = successor(f)
    }
}

function partition_bidirectional_optimized(f, l, p) {
    f = find_if(f, l, p);
    l = find_backward_if_not(f, l, p);
    if (equal(f, l)) return f;
    l = predecessor(l);
    iter_swap(f, l);
    f = successor(f)
    return partition_bidirectional_unguarded(f, l, p);

}

var f = begin(data, "f");
var l = end(data, "l", "#d80500");
var it = partition_bidirectional_optimized(f, l, pred);
                    </textarea> -->






<!-- 

                    <textarea id="dataCodeArea">
                            data = [1, 3, 5];
                            pred = function(x) {return x % 2 == 0;};
                                    </textarea>
                            
                                    <textarea id="codeArea">
                            function find_if_unguarded(f, p) {
                                while ( ! p(source(f))) {
                                    f = successor(f)
                                }
                                return f;
                            }
                            
                            var f = begin(data, "f");
                            var l = begin(data, "l");
                            
                            remove_it(l);
                            
                            var it = find_if_unguarded(f, pred);
                            
                            print(source(it))
                                    </textarea>                     -->